(()=>{"use strict";window.base=((e={})=>{const t="1.0.5",o=window,n=document,r=void 0,s=()=>{},i=n.documentElement||n.body,a=!0,c=!1,l=e=>typeof e,d=e=>Object.prototype.toString.call(e),h=l(s),g=d([]),u=l(""),p=Array.isArray?e=>Array.isArray(e):e=>d(e)===g,m=e=>{throw e},f=e=>m(`Cannot find: ${e}`),y=(e,t)=>m(`Invalid argument ${e}`+(t?`. Expecting (${t})`:"")),v=(e,t)=>{try{const o=JSON.parse(e,t);if(o&&"object"==typeof o)return o}catch(e){}},b=(e,t,o)=>{try{return JSON.stringify(e,t,o)}catch(e){}},_=Math.random,w=setTimeout,C=clearTimeout,N=(e,t=100)=>{let o;const n=t=>{e.apply(r,t)};return(...e)=>(C(o),o=w(n,t,e))},x=(e,t)=>{for(const o in e)if(t(e[o],o))break},k=(e,t)=>{const o=e.indexOf(t);o>=0&&(delete e[o],k(e,t))},S=e=>n.getElementById(e||""),E=e=>e.parentNode,$=(e,t=i)=>t.getElementsByTagName(e||""),I=e=>(e.hidden=c,e),J=e=>(e.hidden=a,e),T=(e,t)=>e.firstChild?e.insertBefore(t,e.firstChild):M(e,t),A=(e,t)=>{if(t)return l(t)===u?e.appendChild(n.createTextNode(t)):e.appendChild(t)},M=(e,t)=>{if(p(t))for(let o=0;o<t.length;o++)A(e,t[o]);else A(e,t)},F=()=>m("Cannot refer root element"),B=e=>(E(e)||m("Cannot remove node with no parent")).removeChild(e),O=(e,t,o)=>{const r=n.createElement(e);if(t)for(const e in t)r.setAttribute(e,t[e]);return o&&M(r,o),r},H=o.getComputedStyle?e=>o.getComputedStyle(e):e=>e.currentStyle,L=e=>new RegExp("(^|\\s+)("+e+")\\s*(?=(\\s|$))","g"),R=new RegExp("[\\.\\|\\s]+","g"),P=(e,t,o)=>{const n=(e,t="|")=>e.replace(R,t).trim(),r=o?n(o," "):"",s=n(r+"|"+t);return e.className=(e.className.replace(L(s),"")+(r.length?" "+r:"")).trim(),e},z=(e,t)=>P(e,r,t),j=(e,t)=>P(e,t),D="__fade",K="_fadein",W="_fadeout",q=(e,t=300)=>(w(j,t,P(e,W,D),D),e),G=e=>P(e,W,K),U=e=>P(e,"_fadein|"+D,W),X=(e,t,o)=>{I(z(e,"_peek"));const n=t();return o||J(e),j(e,"_peek"),n},Q=e=>"addEventListener"in e&&"removeEventListener"in e,V=e=>"attachEvent"in e&&"detachEvent"in e,Y=(e,t,o,n)=>{if(Q(e))return e.addEventListener(t,o,n),{h:o,stop:()=>Z(e,t,o,n)};if(V(e)){const r=s=>{o.apply(e,s),n&&n.once&&e.detachEvent("on"+t,r)};return e.attachEvent("on"+t,r),{h:r,stop:()=>e.detachEvent("on"+t,r)}}m("Fail to add event listener.")},Z=(e,t,o,n)=>{Q(e)?e.removeEventListener(t,o,n):V(e)?e.detachEvent("on"+t,o):m("Fail to remove event listener.")},ee=(e,t)=>Y(e,"click",t),te=(e,t)=>Z(e,"click",t),oe=(e,t)=>o=>{t&&o.isComposing||e(o)},ne=(()=>{const e=[];return{push:t=>{l(t)===h&&e.push(t)},cancel:t=>{k(e,t)},esc:()=>{if(e.length){const t=e.pop();t&&l(t)===h&&t()}else de(n.body)}}})(),re=e=>{if(e){const t=[],n=e=>{k(t,e)},r=e=>{l(e)===h&&t.push(e)},s=()=>{for(let e=0;e<t.length;e++)t[e]&&l(t[e])===h&&t[e]()},i=t=>e.getItem(t)||"",a=(t,o)=>{e.setItem(t,o),s()},c=t=>{e.removeItem(t),s()},d=t=>parseInt(""+(e.getItem(t)||0)),g=(e,t)=>a(e,""+t),u=(t,o="{}")=>v(e.getItem(t)||o)||v(o)||{},p=(e,t,o="{}")=>a(e,b(t)||o),m=t=>{const o=e.getItem(t),n=v(o),r=o&&!n;if(r){const e=`Base found corrupted data on [${t}].`;console.log("%c"+e,"color:tomato"),w((()=>{if(confirm(`${e} Recover bad data?`)){const e=`${t}.${y()}.x`,n=`Data has been recovered as [${e}].`;se.setString(e,o),w((()=>{console.log("%c"+n,"color:orange"),alert(n)}))}}))}return!r},f=()=>{let t=0;for(let o=0;o<e.length;o++){const n=e.key(o);n&&(t+=i(n).length)}return t},y=(t="",o=0)=>{const n=t+parseInt(Date.now()+o+"").toString(36);return null!==e.getItem(n)?y(t,o+1):n};return Y(o,"storage",s),{storage:e,getString:i,setString:a,getNumber:d,setNumber:g,getJson:u,setJson:p,validateJson:m,onChange:r,cleanOnChange:n,remove:c,size:f,newKey:y}}},se=re(o.localStorage),ie=re(o.sessionStorage),ae=(e,t)=>{const o=t?(t.validateJson(e),t.getJson(e)):{},n=(n,r,s=true)=>(o[n]=r,t&&s?(t.setJson(e,o),a):c);return t.onChange((()=>{t.validateJson(e)||t.setJson(e,o)})),{get:e=>o[e],set:n,remove:e=>{n(e,r)}}},ce=ae("base",se),le=((e=o.navigator.serviceWorker)=>{if(e){const t="Cannot find active service worker.",o=e=>new Promise(((o,n)=>{i(e).then((e=>{if(!e||!e.active)throw t;e.active.postMessage("updateFiles"),o(r)})).catch(n)})),n=e=>new Promise(((o,n)=>{i(e).then((e=>{if(!e||!e.active)throw t;e.active.postMessage("removeFiles"),o(r)})).catch(n)})),s=e=>new Promise(((o,n)=>{i(e).then((e=>{if(!e||!e.active)throw t;e.active.postMessage("removeFiles"),e.unregister().then((t=>{o(t?r:e)})).catch(n)})).catch(n)})),i=t=>e.getRegistration(t);return{get:i,register:t=>e.register(t),unregister:s,removeFiles:n,updateFiles:o}}})(),de=(()=>{const e=O("a",{tabindex:"0",class:"_no-focus"}),t=t=>{T(t,e),e.focus()};return t.clear=()=>{E(e)&&B(e)},t})(),he="_dark",ge=(()=>{const e="_color-scheme",t="theme";let s="",a=[he],c=S(e);c||(c=O("meta",{name:"color-scheme",content:"",id:e}),n.head.appendChild(c));const d=c,h=o.matchMedia,g=e=>{if(!p(e))return y("to change theme");a=e},m=(e="")=>{P(i,s,e);let o="normal";return"dark"===e.slice(1,5)&&(o="dark"),d.setAttribute("content",o),ce.set(t,e),s=e};if(h){const e=h("(prefers-color-scheme: dark)");ce.get(t)!==r?m(ce.get(t)):e.matches?m(he):m(),Y(e,"change",(e=>{e.matches?m(he):m()}))}else m(ce.get(t));return{list:g,set:m,change:(e=a)=>l(e)===u?m(e):p(e)?(g(e),m(e[e.indexOf(s)+1]||"")):y("to change theme"),current:()=>s}})(),ue=(t,o)=>{e[o]=t};return Y(o,"load",(()=>{const t=S("_script"),i=S("_noscript"),d=(()=>{const e="_scrub";let t,o=c,r=S(e);r||(r=O("div",{id:e,class:e}),T(n.body,r));const s=r;return{show:()=>{o||(o=a,C(t),t=w(G,0,I(s)))},hide:()=>{o&&(o=c,C(t),t=w(J,300,U(s)))}}})(),g=(()=>{const e="_error",t=S(e),r=S(e+"-action"),s=S(e+"-description");if(t){const e=e=>{d||(d=a,s&&(s.innerHTML=e?e.message?e.message.replace(/^Uncaught/,""):e:"Unexpected error occured somewhere."),C(l),I(q(t)),ne.push(i),r&&de(r))},i=()=>{d&&(d=c,C(l),l=w(J,300,U(t)),ne.cancel(i),de(n.body))};let l,d=c;return Y(o,"error",e),{open:e,close:i}}{const t=()=>f(e);return{open:t,close:t}}})(),u=(()=>{const e=S("_bg");if(e){const t=()=>{l||G(e),l=a},o=()=>{l&&U(e),l=c},n="_bgi _smoothest",s=(e=n,t=1e3)=>{if(d){const o=d;return d=r,w(U,100,P(o,D,e)),w(B,100+t,o),o}},i=(t,o=n,r=1e3)=>{if(t===d)return;const s=d;d=t,q(z(t,o),r),e.appendChild(t),w((()=>{s&&s!==d&&B(s)}),r)};z(e,"_app");let l=e.hidden?c:a,d=e.firstElementChild||r;return{show:t,hide:o,now:()=>d,set:i,remove:s}}{const e=()=>f("_bg");return{show:e,hide:e,now:s,set:e,remove:s}}})(),p=(()=>{const e="_overlay",t=S(e),o=S("_close-overlay");if(t){const e=(e={})=>{if(!l){l=a,C(i),e.esc&&ne.push(n),o&&(e.close===a?(e.esc?o.title="Close (esc)":o.title="Close",I(o)):J(o));let r=K;e.blur&&(r="_fadein _blur"),i=w(P,0,I(t),W,r)}},n=()=>{l&&(l=c,C(i),i=w(J,300,P(t,"_fadein|_blur",W)),ne.cancel(n))},r=e=>{t&&ee(t,e)},s=e=>{t&&te(t,e)};o&&ee(o,n);let i,l=c;return{show:e,hide:n,click:r,ignore:s}}{const t=()=>f(e);return{show:t,hide:t,click:t,ignore:t}}})(),y=(e={id:[]})=>{const t=e.id[0],n=S(t)||f(t),r=S(e.id[1]);n.style.touchAction="none";const s=X(n,(()=>({x:0-n.offsetWidth/2,y:0-n.offsetHeight/2}))),i={x:s.x,y:s.y},d=e.stay,g=e=>{n.style.transform=`translate(${e.x}px,${e.y}px)`},u=()=>{b&&(C(v),C(y),ne.cancel(u),p.ignore(u),p.hide(),((e,t=300,o="_smooth")=>{const n=e.style;n.height=`${e.offsetHeight}px`,n.marginBottom=`-${H(e).marginBottom}`,z(e,o),w((()=>{n.height=".1px",w((()=>{n.height=n.marginBottom="",J(j(e,o))}),t)}))})(z(n,W)),y=w((()=>{b=c,l(e.onClose)===h&&e.onClose(n)}),300))},m=N((()=>{X(n,(()=>{n.style.transform="",s.x=i.x=0-n.offsetWidth/2,s.y=i.y=0-n.offsetHeight/2}),b)}));let y,v,b=c;return Y(o,"resize",m),r&&ee(r,u),e.interact&&e.interact(n,s,g),{open:(t={})=>{b||(C(v),C(y),t.esc&&ne.push(u),!e.interact||t.stay||d||(s.x=i.x,s.y=i.y,g(s)),r&&(t.close===c||e.close===c?J(r):(r.title="Close",t.esc&&(r.title="Close (esc)"),I(r))),t.overlay&&(p.show({close:c,blur:t.blur}),t.esc&&p.click(u)),y=w((()=>{const o="__zoomin-c",r="_lift-1";I(P(n,"_fadeout|"+r,o)),w(P,300,n,o,r),b=a;const s=t.timeout||e.timeout;s&&(v=w(u,s))}),t.overlay?300:0))},close:u,destroy:e=>{r&&te(r,u),Z(o,"resize",m),u(),e&&l(e)===h&&w((()=>{e(n),B(n)}),300)}}},v=(()=>{const e=S("_app");if(e)return{show:()=>I(e)}})();t&&B(t),i&&!e.keep_noscript&&B(i),e.ignore_keyboard||Y(o,"keyup",oe((e=>{"Escape"===e.code?ne.esc():e.altKey&&"KeyT"===e.code?ge.change():"Tab"===e.code&&de.clear()}))),v&&!e.hide_app&&v.show(),d.hide(),x({app:v,scrub:d,error:g,details:(e,t)=>{const o=$("summary",e)[0],n=$("section",e)[0];if(!(e&&o&&n))throw"Malformed details: "+t;let r,s;const i=e.style,l=o.style,d=()=>{e.open?i.height=s+"px":i.height=r+"px"};ee(o,(()=>{if(isNaN(r)||isNaN(s)){i.opacity="0",i.height="";const t=e.open;e.open=c,r=e.offsetHeight,e.open=a,s=e.offsetHeight,e.open=t,d(),i.opacity=""}w((()=>{i.overflow="hidden",l.outline="0",d(),w((()=>{i.overflow="",l.outline=""}),300)}))}))},bg:u,overlay:p,modal:y,toast:(e={id:[]})=>{const t="_toaster",o=S(t)||f(t),n=e.id[0],s=e.id[1],i=S(n)||f(n);S(s)||f(s),J(i);let c=0;const l=[];return{pop:(t={})=>{const d=n+"-"+c++,h=d+"-close",g=i.cloneNode(a);g.id=d,o.appendChild(g),((S(d)||f(d)).querySelector("#"+s)||f(s)).id=h;let u=y({id:[d,h],timeout:e.timeout,onClose:()=>{u&&(u.destroy(),u=r)}})||m("Cannot create toast[modal]: "+d);return u&&(l.push(u),u.open(t)),u},close:e=>{const t=l.indexOf(e);if(t>=0){const e=l[t];e&&e.close()}}}},drawer:(e={id:[]})=>{const t=e.id[0],o=S(t)||f(t),r=S(e.id[1])||f(e.id[1]),s=S(e.id[2]),i="_slideout",l="_slidein",d="_lift-1",h=()=>{u||(u=a,ne.push(g),I(o),w((()=>{G(o),P(r,i,l),de(r),w(z,300,r,d)}),100))},g=()=>{u&&(u=c,P(r,"_slidein|"+d,i),w(J,300,U(o)),ne.cancel(g),de(n.body))};let u=c;return z(r,i),J(U(o)),ee(o,(e=>{e&&e.target===o&&g()})),s&&ee(s,g),{open:h,close:g,toggle:()=>{u?g():h()}}},bog:(e="_bog",t=2)=>{const o=S(e)||f(e),n=()=>{o.innerHTML=""},s=(e,s)=>(s&&n(),o.innerHTML+=b(e,r,t)+"\n");return s.clear=n,s}},ue)})),x({version:t,objectOf:d,isArray:p,cantFind:f,invalidArgs:y,JsonParse:v,JsonStringify:b,random:(e,t)=>e&&t?_()*(t-e)+e:e?_()*e:_(),trimNumber:(e,t=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER)=>e>o?o:e<t?t:e,loop:(e,t=0)=>{if(l(e)!==h)return y("for loop","Function");let o,n=c;const r=()=>{n&&(e(s),o=w(r,t))},s={start:()=>{n=a,r()},stop:()=>{C(o),n=c}};return s},each:x,find:(e,t)=>{let o;for(let n=0;!o&&n<e.length;n++)o=t(e[n],n);return o},list:(e,t)=>{const o=[];return e(o)&&t(),{check:n=>{o[n]=a;const r=e(o);return r&&t(),r}}},delay:e=>new Promise((t=>{w(t,e)})),eager:(e,t=100)=>{let o,n=c;const s=()=>{n=c};return(...i)=>(n||(n=a,e.apply(r,i)),C(o),o=w(s,t))},later:N,nodeId:S,nodeTag:$,getNode:(e,t=i)=>t.querySelector(e||""),show:I,hide:J,appendNode:A,prependNode:T,afterNode:(e,t)=>(E(e)||F()).insertBefore(t,e.nextSibling),beforeNode:(e,t)=>(E(e)||F()).insertBefore(t,e),removeNode:B,newNode:O,fa:(e="",t="fas",o="")=>(o&&(o=" "+o),O("i",{class:`_ico -fa${o}`},O("i",{class:`${t} fa-${e}`}))),nodeStyle:H,MatchClass:L,changeClass:P,addClass:z,removeClass:j,fadeIn:G,fadeOut:U,peek:X,listenTo:Y,stopListenTo:Z,ready:e=>Y(o,"load",e),onClick:ee,unClick:te,keypress:oe,esc:ne,img:(e,t,o)=>(o&&(Y(e,"load",o,{once:a}),Y(e,"error",o,{once:a})),e.src=t,e),local:se,session:ie,Data:ae,worker:le,back:(e=-1)=>()=>{o.history.go(e)},goto:(e=".")=>()=>{o.location.href=e},exit:(e="/")=>{const t=o.location,r=n.referrer,s="."+btoa(t.pathname),i=r.match(t.origin);let a=ie.getString(s);return a||(a=i&&0==i.index&&r!=t.origin+t.pathname?r:e),ie.setString(s,a),()=>{const o=ie.getString(s)||e;ie.remove(s),t.href=o}},refocus:de,theme:ge,loadNumber:se.getNumber,saveNumber:e=>t=>se.setNumber(e,t),loadJson:se.getJson,saveJson:e=>t=>se.setJson(e,t),loadString:se.getString,saveString:e=>t=>se.setString(e,t)},ue),console.log(`%c Base v${t} `,"background:#259;color:#eee;padding:5px;margin:10px"),e})(window.base)})();